  


<!DOCTYPE html>
<html>
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# githubog: http://ogp.me/ns/fb/githubog#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>DrBenton/Medic-Injector-JS · GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub" />
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="apple-touch-icon-114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="apple-touch-icon-114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="apple-touch-icon-144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="apple-touch-icon-144.png" />
    <meta name="msapplication-TileImage" content="/windows-tile.png">
    <meta name="msapplication-TileColor" content="#ffffff">

    
    
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <meta content="authenticity_token" name="csrf-param" />
<meta content="x6nHi0SW+CrRcpsYsU2ziuLuOkXK2jDz9dOhKReCy5w=" name="csrf-token" />

    <link href="https://a248.e.akamai.net/assets.github.com/assets/github-2758f9c21ad8bfb88498e4e4f4b78f408b5c5382.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="https://a248.e.akamai.net/assets.github.com/assets/github2-154ffaf2b6e54adc7b4ad61fb3c02fc3faccbd4e.css" media="screen" rel="stylesheet" type="text/css" />
    


    <script src="https://a248.e.akamai.net/assets.github.com/assets/frameworks-28923941200b998a3e7422badab5b9be240f9be4.js" type="text/javascript"></script>
    <script src="https://a248.e.akamai.net/assets.github.com/assets/github-24b8ca996829444ab9173dd22f3e82c8b129e034.js" type="text/javascript"></script>
    

      <link rel='permalink' href='/DrBenton/Medic-Injector-JS/tree/fd19248da889b6f0924b9476d3236c8cb58e17b3'>
    <meta property="og:title" content="Medic-Injector-JS"/>
    <meta property="og:type" content="githubog:gitrepository"/>
    <meta property="og:url" content="https://github.com/DrBenton/Medic-Injector-JS"/>
    <meta property="og:image" content="https://a248.e.akamai.net/assets.github.com/images/gravatars/gravatar-user-420.png?1345673561"/>
    <meta property="og:site_name" content="GitHub"/>
    <meta property="og:description" content="Medic-Injector-JS - A light-weight Javascript Dependency Injection tool, strongly inspired by the great ActionScript3 RobotLegs &amp; SwiftSuspenders frameworks"/>

    <meta name="description" content="Medic-Injector-JS - A light-weight Javascript Dependency Injection tool, strongly inspired by the great ActionScript3 RobotLegs &amp; SwiftSuspenders frameworks" />
  <link href="https://github.com/DrBenton/Medic-Injector-JS/commits/master.atom" rel="alternate" title="Recent Commits to Medic-Injector-JS:master" type="application/atom+xml" />

  </head>


  <body class="logged_out  windows vis-public env-production ">
    <div id="wrapper">

    
    

    

      <div id="header" class="true clearfix">
        <div class="container clearfix">
          <a class="site-logo " href="https://github.com/">
            <img alt="GitHub" class="github-logo-4x" height="30" src="https://a248.e.akamai.net/assets.github.com/images/modules/header/logov7@4x.png?1340659561" />
            <img alt="GitHub" class="github-logo-4x-hover" height="30" src="https://a248.e.akamai.net/assets.github.com/images/modules/header/logov7@4x-hover.png?1340659561" />
          </a>


                  <!--
      make sure to use fully qualified URLs here since this nav
      is used on error pages on other domains
    -->
    <ul class="top-nav logged_out">
        <li class="pricing"><a href="https://github.com/plans">Signup and Pricing</a></li>
        <li class="explore"><a href="https://github.com/explore">Explore GitHub</a></li>
      <li class="features"><a href="https://github.com/features">Features</a></li>
        <li class="blog"><a href="https://github.com/blog">Blog</a></li>
      <li class="login"><a href="https://github.com/login?return_to=%2FDrBenton%2FMedic-Injector-JS">Sign in</a></li>
    </ul>



          
        </div>
      </div>

      

      


            <div class="site hfeed" itemscope itemtype="http://schema.org/WebPage">
      <div class="hentry">
        
        <div class="pagehead repohead instapaper_ignore readability-menu">
          <div class="container">
            <div class="title-actions-bar">
              


                  <ul class="pagehead-actions">


          <li>
            <span class="star-button"><a href="/login?return_to=%2FDrBenton%2FMedic-Injector-JS" class="minibutton js-toggler-target entice tooltipped leftwards" title="You must be signed in to use this feature" rel="nofollow"><span class="mini-icon mini-icon-star"></span>Star</a><a class="social-count js-social-count" href="/DrBenton/Medic-Injector-JS/stargazers">0</a></span>
          </li>
          <li>
            <a href="/login?return_to=%2FDrBenton%2FMedic-Injector-JS" class="minibutton js-toggler-target fork-button entice tooltipped leftwards"  title="You must be signed in to fork a repository" rel="nofollow"><span class="mini-icon mini-icon-fork"></span>Fork</a><a href="/DrBenton/Medic-Injector-JS/network" class="social-count">0</a>
          </li>
    </ul>

              <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
                <span class="repo-label"><span>public</span></span>
                <span class="mega-icon mega-icon-public-repo"></span>
                <span class="author vcard">
                  <a href="/DrBenton" class="url fn" itemprop="url" rel="author">
                  <span itemprop="title">DrBenton</span>
                  </a></span> /
                <strong><a href="/DrBenton/Medic-Injector-JS" class="js-current-repository">Medic-Injector-JS</a></strong>
              </h1>
            </div>

            

  <ul class="tabs">
    <li><a href="/DrBenton/Medic-Injector-JS" class="selected" highlight="repo_sourcerepo_downloadsrepo_commitsrepo_tagsrepo_branches">Code</a></li>
    <li><a href="/DrBenton/Medic-Injector-JS/network" highlight="repo_network">Network</a></li>
    <li><a href="/DrBenton/Medic-Injector-JS/pulls" highlight="repo_pulls">Pull Requests <span class='counter'>0</span></a></li>

      <li><a href="/DrBenton/Medic-Injector-JS/issues" highlight="repo_issues">Issues <span class='counter'>0</span></a></li>



    <li><a href="/DrBenton/Medic-Injector-JS/graphs" highlight="repo_graphsrepo_contributors">Graphs</a></li>


  </ul>
  
  <div id="repo_details" class="metabox clearfix
       ">
      <div id="repo_details_loader" class="metabox-loader" style="display:none">Sending Request&hellip;</div>

        <div class="repo-desc-homepage">
          
    <div class="repository-lang-stats">
      <div class="repository-lang-stats-graph">
      <span class="language-color" style="width:100%; background-color:#f15501;" itemprop="keywords">JavaScript</span>
      </div>
      <ol class="list-tip">
        <li>
            <a href="/languages/JavaScript">
              <span class="color-block language-color" style="background-color:#f15501;"></span>
              <span class="lang">JavaScript</span>
              <span class="percent">100%</span>
            </a>
        </li>
      </ol>
    </div>

<div id="repository_description" class="repository-description">
    <p>A light-weight Javascript Dependency Injection tool, strongly inspired by the great ActionScript3 RobotLegs &amp; SwiftSuspenders frameworks
      <span id="read_more" style="display:none">&mdash; <a href="#readme">Read more</a></span>
    </p>
</div>


<div class="repository-homepage" id="repository_homepage">
  <p></p>
</div>


        </div>

      <div class="edit-repo-desc-homepage" style="display:none">
        <form accept-charset="UTF-8" action="/DrBenton/Medic-Injector-JS/admin/update_meta" id="js-update-repo-meta-form" method="post"><div style="margin:0;padding:0;display:inline"><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="x6nHi0SW+CrRcpsYsU2ziuLuOkXK2jDz9dOhKReCy5w=" /></div>
          <p class="error" style="display:none">Sorry, but there was a problem saving your changes.</p>
          <div>
            <input type="text" id="repository-description-field" class="description-field" name="repo_description" value="A light-weight Javascript Dependency Injection tool, strongly inspired by the great ActionScript3 RobotLegs &amp; SwiftSuspenders frameworks" placeholder="Add a description to this repository" />

            <input type="text" id="repository-homepage-field" class="homepage-field" name="repo_homepage" value="" placeholder="Add a website to this repository" />
          </div>

          <button type="submit" class="classy save-button">Save Changes</button>
          <p class="cancel"><a href="#" class="danger">Cancel</a></p>
</form>      </div>

      
<div class="url-box">
  <ul class="native-clones">
      <li><a href="http://windows.github.com" class="minibutton " icon_class="mini-icon-windows"><span class="mini-icon mini-icon-windows"></span>Clone in Windows</a></li>
      <li><a href="/DrBenton/Medic-Injector-JS/archive/master.zip" class="minibutton " icon_class="mini-icon-download" rel="nofollow" title="Download this repository as a zip file"><span class="mini-icon mini-icon-download"></span>ZIP</a>
  </ul>

  <ul class="clone-urls">
    <li class="http_clone_url selected"><a href="https://github.com/DrBenton/Medic-Injector-JS.git" class="js-git-protocol-selector" data-permission="Read-Only" data-url="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone">HTTP</a></li>

<li class="public_clone_url"><a href="git://github.com/DrBenton/Medic-Injector-JS.git" class="js-git-protocol-selector" data-permission="Read-Only" data-url="/users/set_protocol?protocol_selector=gitweb&amp;protocol_type=clone">Git Read-Only</a></li>
  </ul>
  <input type="text" spellcheck="false" class="url-field" value="https://github.com/DrBenton/Medic-Injector-JS.git">
  <span class="js-clippy mini-icon mini-icon-clippy url-box-clippy" data-clipboard-text="https://github.com/DrBenton/Medic-Injector-JS.git" data-copied-hint="copied!" data-copy-hint="copy to clipboard"></span>
  <p class="url-description"><span class="bold js-clone-url-permission">Read-Only</span> access</p>
</div>

        </div>

  <div class="frame frame-center tree-finder" style="display:none"
      data-tree-list-url="/DrBenton/Medic-Injector-JS/tree-list/fd19248da889b6f0924b9476d3236c8cb58e17b3"
      data-blob-url-prefix="/DrBenton/Medic-Injector-JS/blob/master">

  <div class="breadcrumb">
    <span class="bold"><a href="/DrBenton/Medic-Injector-JS">Medic-Injector-JS</a></span> /
    <input class="tree-finder-input js-navigation-enable" type="text" name="query" autocomplete="off" spellcheck="false">
  </div>

    <div class="octotip">
      <p>
        <a href="/DrBenton/Medic-Injector-JS/dismiss-tree-finder-help" class="dismiss js-dismiss-tree-list-help" title="Hide this notice forever" rel="nofollow">Dismiss</a>
        <span class="bold">Octotip:</span> You've activated the <em>file finder</em>
        by pressing <span class="kbd">t</span> Start typing to filter the
        file list. Use <span class="kbd badmono">?</span> and
        <span class="kbd badmono">?</span> to navigate,
        <span class="kbd">enter</span> to view files.
      </p>
    </div>

  <table class="tree-browser css-truncate" cellpadding="0" cellspacing="0">
    <tr class="js-no-results no-results" style="display: none">
      <th colspan="2">No matching files</th>
    </tr>
    <tbody class="js-results-list js-navigation-container">
    </tbody>
  </table>
</div>

<div id="jump-to-line" style="display:none">
  <h2>Jump to Line</h2>
  <form accept-charset="UTF-8">
    <input class="textfield" type="text">
    <div class="full-button">
      <button type="submit" class="classy">
        Go
      </button>
    </div>
  </form>
</div>


<div class="tabnav">

  <span class="tabnav-right">
    <ul class="tabnav-tabs">
      <li><a href="/DrBenton/Medic-Injector-JS/tags" class="tabnav-tab" highlight="repo_tags">Tags <span class="counter blank">0</span></a></li>
      <li><a href="/DrBenton/Medic-Injector-JS/downloads" class="tabnav-tab" highlight="repo_downloads">Downloads <span class="counter blank">0</span></a></li>
    </ul>
    
  </span>

  <div class="tabnav-widget scope">


    <div class="context-menu-container js-menu-container js-context-menu">
      <a href="#"
         class="minibutton bigger switcher js-menu-target js-commitish-button btn-branch repo-tree"
         data-hotkey="w"
         data-ref="master">
         <span><em class="mini-icon mini-icon-branch"></em><i>branch:</i> master</span>
      </a>

      <div class="context-pane commitish-context js-menu-content">
        <a href="javascript:;" class="close js-menu-close"><span class="mini-icon mini-icon-remove-close"></span></a>
        <div class="context-title">Switch branches/tags</div>
        <div class="context-body pane-selector commitish-selector js-navigation-container">
          <div class="filterbar">
            <input type="text" id="context-commitish-filter-field" class="js-navigation-enable js-filterable-field" placeholder="Filter branches/tags">
            <ul class="tabs">
              <li><a href="#" data-filter="branches" class="selected">Branches</a></li>
                <li><a href="#" data-filter="tags">Tags</a></li>
            </ul>
          </div>

          <div class="js-filter-tab js-filter-branches" data-filterable-for="context-commitish-filter-field" data-filterable-type=substring>
            <div class="no-results js-not-filterable">Nothing to show</div>
              <div class="commitish-item branch-commitish selector-item js-navigation-item js-navigation-target ">
                <span class="mini-icon mini-icon-confirm"></span>
                <h4>
                    <a href="/DrBenton/Medic-Injector-JS/tree/gh-pages" class="js-navigation-open" data-name="gh-pages" rel="nofollow">gh-pages</a>
                </h4>
              </div>
              <div class="commitish-item branch-commitish selector-item js-navigation-item js-navigation-target selected">
                <span class="mini-icon mini-icon-confirm"></span>
                <h4>
                    <a href="/DrBenton/Medic-Injector-JS/tree/master" class="js-navigation-open" data-name="master" rel="nofollow">master</a>
                </h4>
              </div>
          </div>

            <div class="js-filter-tab js-filter-tags filter-tab-empty" style="display:none" data-filterable-for="context-commitish-filter-field" data-filterable-type=substring>
              <div class="no-results js-not-filterable">Nothing to show</div>
            </div>
        </div>
      </div><!-- /.commitish-context-context -->
    </div>
  </div> <!-- /.scope -->

  <ul class="tabnav-tabs">
    <li><a href="/DrBenton/Medic-Injector-JS" class="selected tabnav-tab" highlight="repo_source">Files</a></li>
    <li><a href="/DrBenton/Medic-Injector-JS/commits/master" class="tabnav-tab" highlight="repo_commits">Commits</a></li>
    <li><a href="/DrBenton/Medic-Injector-JS/branches" class="tabnav-tab" highlight="repo_branches" rel="nofollow">Branches <span class="counter ">2</span></a></li>
  </ul>

</div>

  
  
  


            
          </div>
        </div><!-- /.repohead -->

        <div id="js-repo-pjax-container" class="container context-loader-container" data-pjax-container>
          


    

<!-- tree commit key: views10/v8/tree:v21:4bc8012476965cebc0d8298008246e45 -->

  <div id="slider">

        <p class="history-link js-history-link-replace" data-path="/">
<a href="/DrBenton/Medic-Injector-JS/commits/master">              <span class="mini-icon mini-icon-history tooltipped" title="Browse commits for this branch"></span>
              27 commits
</a>        </p>

      <div class="breadcrumb" data-path="/">
        <b itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/DrBenton/Medic-Injector-JS" itemscope="url"><span itemprop="title">Medic-Injector-JS</span></a></b> / 
      </div>

        

  <div class="frames">
    <div class="frame frame-center" data-path="/" data-permalink-url="/DrBenton/Medic-Injector-JS/tree/fd19248da889b6f0924b9476d3236c8cb58e17b3" data-title="DrBenton/Medic-Injector-JS · GitHub" data-type="tree">
      <div class="bubble tree-browser-wrapper">
      <table class="tree-browser css-truncate" cellpadding="0" cellspacing="0">
        <thead>
            
  <div class="commit commit-tease js-details-container">
    <p class="commit-title ">
        <a href="/DrBenton/Medic-Injector-JS/commit/fd19248da889b6f0924b9476d3236c8cb58e17b3" class="message">Unit tests "Full Async" and "Light Sync" versions fixes</a>
        
    </p>
    <div class="commit-meta">
      <a href="/DrBenton/Medic-Injector-JS/commit/fd19248da889b6f0924b9476d3236c8cb58e17b3" class="sha-block">latest commit <span class="sha">fd19248da8</span></a>
      <span class="js-clippy mini-icon mini-icon-clippy " data-clipboard-text="fd19248da889b6f0924b9476d3236c8cb58e17b3" data-copied-hint="copied!" data-copy-hint="Copy SHA"></span>

      <div class="authorship">
        <img class="gravatar" height="20" src="https://secure.gravatar.com/avatar/ed32c80bb2684ff063d7164e2c392674?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="20" />
        <span class="author-name"><a href="/DrBenton" rel="author">DrBenton</a></span>
        authored <time class="js-relative-date updated" datetime="2012-09-05T15:04:33-07:00" title="2012-09-05 15:04:33">September 05, 2012</time>

      </div>
    </div>
  </div>

        </thead>

        

<tbody class="tree-entries "
    data-url="/DrBenton/Medic-Injector-JS/tree-commits/master">


    <tr>
      <td class="icon"><span class="mini-icon mini-icon-directory"></span></td>
      <td class="content"><a href="/DrBenton/Medic-Injector-JS/tree/master/docs" class="js-slide-to css-truncate-target" id="e3e2a9bfd88566b05001b02a3f51d286-a9b6b56c0fc77b040a637f8bc53e8f0f395f112f" title="docs">docs</a></td>
      <td class="age"><time class="js-relative-date" datetime="2012-09-05T14:15:41-07:00" title="2012-09-05 14:15:41">September 05, 2012</time></td>

      <td class="message">
          <a href="/DrBenton/Medic-Injector-JS/commit/c848ed9cb3aba7b9f5b86b3c88df7c14f8554812" class="message">better Node.js module management between "Full Async" and "Light Sync…</a> [<a href="/DrBenton" rel="author">DrBenton</a>]

      </td>
    </tr>
    <tr>
      <td class="icon"><span class="mini-icon mini-icon-directory"></span></td>
      <td class="content"><a href="/DrBenton/Medic-Injector-JS/tree/master/test" class="js-slide-to css-truncate-target" id="098f6bcd4621d373cade4e832627b4f6-40548c5e2de34c301fdce67793138340d2945217" title="test">test</a></td>
      <td class="age"><time class="js-relative-date" datetime="2012-09-05T15:04:33-07:00" title="2012-09-05 15:04:33">September 05, 2012</time></td>

      <td class="message">
          <a href="/DrBenton/Medic-Injector-JS/commit/fd19248da889b6f0924b9476d3236c8cb58e17b3" class="message">Unit tests "Full Async" and "Light Sync" versions fixes</a> [<a href="/DrBenton" rel="author">DrBenton</a>]

      </td>
    </tr>
    <tr>
      <td class="icon"><span class="mini-icon mini-icon-text-file"></span></td>
      <td class="content"><a href="/DrBenton/Medic-Injector-JS/blob/master/.travis.yml" class="js-slide-to css-truncate-target" id="354f30a63fb0907d4ad57269548329e3-12b2631c9e1abf1a2bb6f942719f0a89718055fc" title=".travis.yml">.travis.yml</a></td>
      <td class="age"><time class="js-relative-date" datetime="2012-08-26T09:46:10-07:00" title="2012-08-26 09:46:10">August 26, 2012</time></td>

      <td class="message">
          <a href="/DrBenton/Medic-Injector-JS/commit/83209c9841e3c19b64d9efba86353802fccd9ec8" class="message">* added ".travis.yml"</a> [<a href="/DrBenton" rel="author">DrBenton</a>]

      </td>
    </tr>
    <tr>
      <td class="icon"><span class="mini-icon mini-icon-text-file"></span></td>
      <td class="content"><a href="/DrBenton/Medic-Injector-JS/blob/master/LICENSE" class="js-slide-to css-truncate-target" id="9879d6db96fd29134fc802214163b95a-fbeb2a1aa8a6ce1e8c67036d1166357c8e321c1e" title="LICENSE">LICENSE</a></td>
      <td class="age"><time class="js-relative-date" datetime="2012-08-25T14:23:59-07:00" title="2012-08-25 14:23:59">August 25, 2012</time></td>

      <td class="message">
          <a href="/DrBenton/Medic-Injector-JS/commit/2cef485dfa4343c142b071b9ae22c20d9d04eab4" class="message">* Work In Progress : added "Injector#cancelInjectionsInto()" and "Inj…</a> [<a href="/DrBenton" rel="author">DrBenton</a>]

      </td>
    </tr>
    <tr>
      <td class="icon"><span class="mini-icon mini-icon-text-file"></span></td>
      <td class="content"><a href="/DrBenton/Medic-Injector-JS/blob/master/README.md" class="js-slide-to css-truncate-target" id="04c6e90faac2675aa89e2176d2eec7d8-6a5a4bdc03a147d2298753eebab8e1b73aa51fba" title="README.md">README.md</a></td>
      <td class="age"><time class="js-relative-date" datetime="2012-09-05T14:59:46-07:00" title="2012-09-05 14:59:46">September 05, 2012</time></td>

      <td class="message">
          <a href="/DrBenton/Medic-Injector-JS/commit/c43add80eddbc906d5340bceb2beac9e82fc44ea" class="message">README is now correctly displayed on npmjs.org too</a> [<a href="/DrBenton" rel="author">DrBenton</a>]

      </td>
    </tr>
    <tr>
      <td class="icon"><span class="mini-icon mini-icon-text-file"></span></td>
      <td class="content"><a href="/DrBenton/Medic-Injector-JS/blob/master/index.js" class="js-slide-to css-truncate-target" id="168726dbe96b3ce427e7fedce31bb0bc-1c32dfc9180f7252fa54c895abc1c0b79d9199bd" title="index.js">index.js</a></td>
      <td class="age"><time class="js-relative-date" datetime="2012-09-05T14:15:41-07:00" title="2012-09-05 14:15:41">September 05, 2012</time></td>

      <td class="message">
          <a href="/DrBenton/Medic-Injector-JS/commit/c848ed9cb3aba7b9f5b86b3c88df7c14f8554812" class="message">better Node.js module management between "Full Async" and "Light Sync…</a> [<a href="/DrBenton" rel="author">DrBenton</a>]

      </td>
    </tr>
    <tr>
      <td class="icon"><span class="mini-icon mini-icon-text-file"></span></td>
      <td class="content"><a href="/DrBenton/Medic-Injector-JS/blob/master/medic-injector.js" class="js-slide-to css-truncate-target" id="e7fdd4da88f2e02aa3115d73895019fa-1757ca065ee4a6f833b10c52a1d8c5e599a9acb2" title="medic-injector.js">medic-injector.js</a></td>
      <td class="age"><time class="js-relative-date" datetime="2012-09-05T14:15:41-07:00" title="2012-09-05 14:15:41">September 05, 2012</time></td>

      <td class="message">
          <a href="/DrBenton/Medic-Injector-JS/commit/c848ed9cb3aba7b9f5b86b3c88df7c14f8554812" class="message">better Node.js module management between "Full Async" and "Light Sync…</a> [<a href="/DrBenton" rel="author">DrBenton</a>]

      </td>
    </tr>
    <tr>
      <td class="icon"><span class="mini-icon mini-icon-text-file"></span></td>
      <td class="content"><a href="/DrBenton/Medic-Injector-JS/blob/master/medic-injector.sync.js" class="js-slide-to css-truncate-target" id="f2b4af61a5fbfc22f61ab3d311011ac4-7521a37bb9568647848a1ebe29a8af4a7c6e85a8" title="medic-injector.sync.js">medic-injector.sync.js</a></td>
      <td class="age"><time class="js-relative-date" datetime="2012-09-05T14:15:41-07:00" title="2012-09-05 14:15:41">September 05, 2012</time></td>

      <td class="message">
          <a href="/DrBenton/Medic-Injector-JS/commit/c848ed9cb3aba7b9f5b86b3c88df7c14f8554812" class="message">better Node.js module management between "Full Async" and "Light Sync…</a> [<a href="/DrBenton" rel="author">DrBenton</a>]

      </td>
    </tr>
    <tr>
      <td class="icon"><span class="mini-icon mini-icon-text-file"></span></td>
      <td class="content"><a href="/DrBenton/Medic-Injector-JS/blob/master/package.json" class="js-slide-to css-truncate-target" id="b9cfc7f2cdf78a7f4b91a753d10865a2-0294704c83f204d258919098fd384fc595222fec" title="package.json">package.json</a></td>
      <td class="age"><time class="js-relative-date" datetime="2012-09-05T14:15:41-07:00" title="2012-09-05 14:15:41">September 05, 2012</time></td>

      <td class="message">
          <a href="/DrBenton/Medic-Injector-JS/commit/c848ed9cb3aba7b9f5b86b3c88df7c14f8554812" class="message">better Node.js module management between "Full Async" and "Light Sync…</a> [<a href="/DrBenton" rel="author">DrBenton</a>]

      </td>
    </tr>
</tbody>

      </table>
      </div>

        <!-- readme cache key: tree-readme:5515117:6a5a4bdc03a147d2298753eebab8e1b73aa51fba -->
        <div id="readme" class="clearfix announce instapaper_body md" data-path="/">
          <span class="name"><span class="mini-icon mini-icon-readme"></span> README.md</span><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="medic-injector" class="anchor" href="#medic-injector"><span class="mini-icon mini-icon-link"></span></a>Medic Injector</h1>

<p><a href="http://travis-ci.org/DrBenton/Medic-Injector-JS"><img src="https://secure.travis-ci.org/DrBenton/Medic-Injector-JS.png" alt="build status" style="max-width:100%;"></a></p>

<p>Medic Injector is a Javascript transcription of the great <a href="https://github.com/tschneidereit/SwiftSuspenders">SwiftSuspenders</a>
light-weight ActionScript IoC container - coupled with the <a href="http://www.robotlegs.org/">RobotLegs</a> framework, this is one of
the technologies with which I most enjoyed working, and I hope you will enjoy using this Javascript version too!</p>

<p>It lets you wire your application components in a very simple and intuitive way.</p>

<p>You setup your Injection Mappings once, and then use them everywhere you want in your application, without any overhead -
Injections Points are recognized only from functions arguments names and Javascript objects instances properties names.</p>

<p>It can be used in Node.js and in the browser. If you use
<a href="https://github.com/amdjs/amdjs-api/wiki/AMD">Asynchronous Module Definition</a>
in your client-side Javascript app, it will be particulary easy to add Medic Injector.
It is a very agnostic tool, which can be used in vanilla JS, Express server-side applications,
Backbone browser-side applications, etc.</p>

<p>It is bundled with Unit Tests and <a href="http://drbenton.github.com/Medic-Injector-JS/api/">API documentation</a>.</p>

<h4>
<a name="medic-injector-sync" class="anchor" href="#medic-injector-sync"><span class="mini-icon mini-icon-link"></span></a>Medic Injector Sync</h4>

<p>A lighter implementation is available too, with synchronous Injections values resolutions only. It is less powerful but
it is much more simple to use, since every operation immediately return its result instead of triggering a callback.</p>

<p>It's only 4kb when minified with UglifyJS.</p>

<p>You can look at the
<a href="https://github.com/DrBenton/Medic-Injector-JS/blob/master/medic-injector.sync.js">medic-injector.sync.js</a> file
and <a href="https://github.com/DrBenton/Medic-Injector-JS/blob/master/test/medic-injector.sync.js">its unit tests</a> for details,
but it is just a "_immediate returned values instead of callbacks_" version of the Medic Injector full asynchronous library
(without the <code>toModule()</code> mapping, since it couldn't be synchronous in a browser AMD context).</p>

<p>The following Tutorial and Synopis use the full asynchronous version of Medic Injector.</p>

<h2>
<a name="tutorial" class="anchor" href="#tutorial"><span class="mini-icon mini-icon-link"></span></a>Tutorial</h2>

<p>There are two main phases to properly use this library : a "injection mappings" setup, then a "injections points" use in your
whole application.</p>

<p>During the first phase, you create "injection mappings". Each injection mapping has a unique ID, and is linked to a value.
This value can be a Javascript scalar or object, but it can be bound to a more complex data source, like an asynchronous
resource or a Node.js / AMD module. But we will see that later, for now let's look at the simplest dependency injection
scheme:</p>

<div class="highlight"><pre><span class="c1">// Injector instance creation</span>
<span class="kd">var</span> <span class="nx">Injector</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'medic-injector'</span><span class="p">).</span><span class="nx">Injector</span><span class="p">;</span><span class="c1">//with AMD you would use "require(['medic-injector'], function() { /*your code*/ })" instead</span>
<span class="kd">var</span> <span class="nx">injector</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Injector</span><span class="p">();</span>

<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'debug'</span><span class="p">).</span><span class="nx">toValue</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="c1">//a first simple Injection Mapping</span>

<span class="c1">// Later in you application code</span>
<span class="kd">function</span> <span class="nx">displayHomepage</span> <span class="p">(</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">render</span> <span class="nx">debug</span> <span class="o">?</span> <span class="s1">'home.debug.html'</span> <span class="o">:</span> <span class="s1">'home.html'</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// And later again</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">triggerFunctionWithInjectedParams</span><span class="p">(</span><span class="nx">displayHomepage</span><span class="p">);</span>
</pre></div>

<p>What did we do? We just created an instance of a Medic Injector, and added a single Injection Mapping to , with a 'debug'
unique ID and a simple boolean value.
Later in the code, we asked the Injector to trigger a previously defined function. When it does this, it quickly parses
the arguments of the requested function, and for each argument it looks if an injection mapping has been registered with
an ID matching the argument name. When an argument name matches an injection mapping ID, the value of the injection mapping
will be automatically injected in this argument.</p>

<p>We can also use injections points in a OOP code. With the same setup than the previous example, we can do this :</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">Logger</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">();</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">injectInto</span><span class="p">(</span><span class="nx">logger</span><span class="p">);</span>
</pre></div>

<p>After this "injectInto()" call, our Logger instance will have its "debug" property set to 'true'. The Logger can even
 call the injector itself:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">Logger</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span>
<span class="p">{</span>
 <span class="k">this</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
 <span class="k">this</span><span class="p">.</span><span class="nx">postInjections</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// If an "injected" object instance has a "postInjections" method, it will be automatically triggered</span>
    <span class="c1">// after the injections resolution (injections mapping can be asynchronous).</span>
    <span class="c1">// It can be considered as a "second constructor", called when you object instance is really ready, with all its</span>
    <span class="c1">// injected dependencies resolved.</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="s1">'ready'</span><span class="p">);</span>
 <span class="p">};</span>

 <span class="nx">injector</span><span class="p">.</span><span class="nx">injectInto</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>

<p>Ok, this 'debug' property was not a very interesting injection. Let's see something more advanced:</p>

<div class="highlight"><pre><span class="c1">// a new "value" Injection Mapping...</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'appConfig'</span><span class="p">).</span><span class="nx">toValue</span><span class="p">({</span>
    <span class="nx">mode</span><span class="o">:</span> <span class="s1">'development'</span><span class="p">,</span>
    <span class="nx">db</span><span class="o">:</span> <span class="p">{</span><span class="nx">host</span><span class="o">:</span> <span class="s1">'localhost'</span><span class="p">,</span> <span class="nx">db</span><span class="o">:</span> <span class="s1">'test'</span><span class="p">},</span>
    <span class="nx">mail</span><span class="o">:</span> <span class="p">{</span><span class="nx">host</span><span class="o">:</span> <span class="s1">'smtp.gmail.com'</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">'webmaster@test.com'</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="s1">''</span><span class="p">},</span>
<span class="p">});</span>

<span class="c1">// ...and a new type of Injection Mapping, used with the "toProvider" method</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'csrf'</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">CsrfGenerator</span><span class="p">.</span><span class="nx">getNewToken</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>

<p>The 'csrf' injection mapping is not linked to a simple value, but to a "Provider" return value. A Provider is simply
a function that returns a value, immediatly like the 'csrf' one or asynchronously.
Each time a function used with the Injector will have a 'csrf' argument or a custom Javascript type will have a 'csrf'
property initially set to 'null', the injector will set this argument/property value to a new
<a href="http://en.wikipedia.org/wiki/Cross-site_request_forgery">CSRF token</a>.</p>

<p>What if our 'CsrfGenerator' has an asynchronous flow ? Well, it's simple, you just have to add a 'callback' argument
to your Provider function, and the Medic Injector will consider the Provider as an asynchronous one. In such a cas,
instead of getting the return value of your Provider it will wait for a 'callback' call. When this function will be
triggered by your Provider, it will have to call it with a single argument, which will be considered as the Injection Mapping
value:</p>

<div class="highlight"><pre><span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'csrf'</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">CsrfGenerator</span><span class="p">.</span><span class="nx">getNewToken</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">err</span> <span class="o">&amp;&amp;</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
        <span class="nx">callback</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span><span class="c1">//the 'result' value will be our 'csrf' Injection Mapping value.</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>

<p>Note that this Provider will be triggered each time this Injection Mapping is requested by one of your functions or one
of your JS custome types. For some mappings you will probably want to trigger the Provider only once. Well, that's simple,
you just have to add a "asSingleton()" call to your Injection Mapping:</p>

<div class="highlight"><pre><span class="c1">// DB connection : it will be "lazy-triggered", only when the injection mapping is requested for the first time</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'db'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">toProvider</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">appConfig</span><span class="p">)</span> <span class="p">{</span><span class="c1">//the previously defined "app config" will be automatically injected in this provider</span>
        <span class="kd">var</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'mongoose'</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">createConnection</span><span class="p">(</span><span class="nx">appConfig</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">host</span><span class="p">,</span> <span class="nx">appConfig</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">db</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">db</span><span class="p">;</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">asSingleton</span><span class="p">();</span><span class="c1">//shared singleton instance</span>
</pre></div>

<p>As you can see, we have define a 'db' Injection Mapping, which will return a new MongoDB connection. Because we used the
"asSingleton()" method, it will be created only when it is first requested, and then the same shared instance will always be
injected.</p>

<p>You may have noticed on the last example that the Provider has a "appConfig" argument, used in the Provider.
That's a key feature of the Medic Injector : all Injections Mappings can themselves  recursively request others
Injections Mapping, just by using Injections Mappings IDS in their Provider function argument. This system can handle as many
Injections Mappings nested levels as you need, and handle asynchonous ones automatically.</p>

<p>For asynchronous Providers you can mix the "callback" argument with others injections depencies arguments.</p>

<p>You can also use injection on simple Strings, with the "${injectionName}" pattern:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">sourceStr</span> <span class="o">=</span> <span class="s1">'::${username}::${csrf}::'</span><span class="p">;</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">parseStr</span><span class="p">(</span><span class="nx">sourceStr</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">injectedStr</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// injectedStr = '::john::eklm4p12::'</span>
<span class="p">});</span>
</pre></div>

<p>Now that you've seen these simple examples, you may take a look at the following synopsis, which use all this and introduce
a new Injection Mapping type, used with the "toModule()" method.</p>

<h2>
<a name="synopsis" class="anchor" href="#synopsis"><span class="mini-icon mini-icon-link"></span></a>Synopsis</h2>

<p>In a "app/bootstrap.js" file, the injection mappings initialization:</p>

<div class="highlight"><pre>
<span class="c1">// Injector instance creation</span>
<span class="kd">var</span> <span class="nx">Injector</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'medic-injector'</span><span class="p">);</span><span class="c1">//with AMD you would use "require(['medic-injector'], function() { ... })" instead</span>
<span class="kd">var</span> <span class="nx">injector</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Injector</span><span class="p">();</span>

<span class="c1">// Simplest injections : just simple values</span>
<span class="c1">// Every time an entity declares an injection point whose name matches this injection name, this injection point value will</span>
<span class="c1">// be automatically set to this injection mapping value.</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'debug'</span><span class="p">).</span><span class="nx">toValue</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'appConfig'</span><span class="p">).</span><span class="nx">toValue</span><span class="p">({</span>
    <span class="nx">mode</span><span class="o">:</span> <span class="s1">'development'</span><span class="p">,</span>
    <span class="nx">db</span><span class="o">:</span> <span class="p">{</span><span class="nx">host</span><span class="o">:</span> <span class="s1">'localhost'</span><span class="p">,</span> <span class="nx">db</span><span class="o">:</span> <span class="s1">'test'</span><span class="p">},</span>
    <span class="nx">mail</span><span class="o">:</span> <span class="p">{</span><span class="nx">host</span><span class="o">:</span> <span class="s1">'smtp.gmail.com'</span><span class="p">,</span> <span class="nx">user</span><span class="o">:</span> <span class="s1">'webmaster@test.com'</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="s1">''</span><span class="p">},</span>
<span class="p">});</span>

<span class="c1">// Types injections : an instance of the given JS type will be created on demand when an entity declares an injection point</span>
<span class="c1">// whose name matches this injection name</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'logger'</span><span class="p">).</span><span class="nx">toValue</span><span class="p">(</span><span class="nx">Logger</span><span class="p">).</span><span class="nx">asSingleton</span><span class="p">();</span><span class="c1">//when "asSingleton()" is used, the first created instance will always be be injected</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'swig'</span><span class="p">).</span><span class="nx">toValue</span><span class="p">(</span><span class="nx">Swig</span><span class="p">).</span><span class="nx">asSingleton</span><span class="p">();</span>

<span class="c1">// Module injections : can be used in Node.Js or in an AMD environment</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'subscribeFormTemplate'</span><span class="p">).</span><span class="nx">toModule</span><span class="p">(</span><span class="s1">'./view/subscribe-form-template.html'</span><span class="p">);</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'inherits'</span><span class="p">).</span><span class="nx">toModule</span><span class="p">(</span><span class="s1">'util'</span> <span class="s1">'inherits'</span><span class="p">);</span>

<span class="c1">// Providers injections : the given function is triggered on demand when an entity declares an injection point</span>
<span class="c1">// whose name matches this injection name</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'csrf'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">toProvider</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">CsrfGenerator</span><span class="p">.</span><span class="nx">getNewToken</span><span class="p">();</span>
    <span class="p">});</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'db'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">toProvider</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">appConfig</span><span class="p">)</span> <span class="p">{</span><span class="c1">//the previously defined "app config" will be automatically injected in this provider</span>
        <span class="kd">var</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'mongoose'</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">createConnection</span><span class="p">(</span><span class="nx">appConfig</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">host</span><span class="p">,</span> <span class="nx">appConfig</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">db</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">db</span><span class="p">;</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">asSingleton</span><span class="p">();</span><span class="c1">//shared singleton instance</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'mailer'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">toProvider</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">appConfig</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">mailer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Mailer</span><span class="p">();</span>
        <span class="nx">mailer</span><span class="p">.</span><span class="nx">host</span> <span class="o">=</span> <span class="nx">appConfig</span><span class="p">.</span><span class="nx">mail</span><span class="p">.</span><span class="nx">host</span><span class="p">;</span>
        <span class="nx">mailer</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="nx">appConfig</span><span class="p">.</span><span class="nx">mail</span><span class="p">.</span><span class="nx">user</span><span class="p">;</span>
        <span class="nx">mailer</span><span class="p">.</span><span class="nx">password</span> <span class="o">=</span> <span class="nx">appConfig</span><span class="p">.</span><span class="nx">mail</span><span class="p">.</span><span class="nx">password</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">mailer</span><span class="p">;</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">asSingleton</span><span class="p">();</span><span class="c1">//shared singleton instance</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'subscribeFormHtml'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">toProvider</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">csrf</span><span class="p">,</span> <span class="nx">subscribeFormTemplate</span><span class="p">,</span> <span class="nx">swig</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//these previously defined injections mappings will be automatically injected in this provider</span>
        <span class="kd">var</span> <span class="nx">tmpl</span> <span class="o">=</span> <span class="nx">swig</span><span class="p">.</span><span class="nx">compileFile</span><span class="p">(</span><span class="nx">subscribeFormTemplate</span><span class="p">);</span>
        <span class="nx">tmpl</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
            <span class="nx">csrf</span><span class="o">:</span> <span class="nx">csrf</span>
        <span class="p">});</span>
    <span class="p">});</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">addMapping</span><span class="p">(</span><span class="s1">'currentUser'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">toProvider</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">db</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//Providers can be asynchronous too (if they have a "callback" arg, they are considered as async Providers)</span>
        <span class="kd">var</span> <span class="nx">UserModel</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="s1">'User'</span><span class="p">);</span>
        <span class="nx">MyModel</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">userId</span><span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">err</span> <span class="o">&amp;&amp;</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
            <span class="nx">callback</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">});</span>
    <span class="p">.</span><span class="nx">asSingleton</span><span class="p">();</span><span class="c1">//shared singleton instance</span>
</pre></div>

<p>In a "app/subscribe-form.js" file, injection mappings use:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">SubscribeForm</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

    <span class="c1">// This prop value will be automatically set to the shared "mailer" instance</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">mailer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="c1">// This prop value will be automatically set to a new rendered "subscribe form", with a new CSRF token</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">subscribeFormHtml</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="c1">// This prop value will be automatically set to the shared "UserModel" instance</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentUser</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="c1">// This JS type will be "auto-injected"</span>
    <span class="nx">injector</span><span class="p">.</span><span class="nx">injectInto</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

<span class="p">};</span>
<span class="nx">SubscribeForm</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">postInjections</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// This method will be automatically triggered when all this instance injection points will have been resolved</span>
    <span class="c1">// It's a sort of "post injections" constructor</span>
<span class="p">};</span>
<span class="nx">SubscribeForm</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">subscribeFormHtml</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">SubscribeForm</span><span class="p">;</span>

</pre></div>

<h2>
<a name="api" class="anchor" href="#api"><span class="mini-icon mini-icon-link"></span></a>API</h2>

<p>See the API here : <a href="http://drbenton.github.com/Medic-Injector-JS/api/">http://drbenton.github.com/Medic-Injector-JS/api/</a></p>

<p>The API is generated with <a href="https://github.com/senchalabs/jsduck">JSDuck</a> with the following command:</p>

<pre><code>$ jsduck --output docs/api/ medic-injector.js medic-injector.sync.js
</code></pre>

<h2>
<a name="running-tests" class="anchor" href="#running-tests"><span class="mini-icon mini-icon-link"></span></a>Running Tests</h2>

<p>To run the test suite you will need to have the <a href="http://visionmedia.github.com/mocha/">Mocha</a> library globally installed.
If you don't already have it, just invoke the following command:</p>

<pre><code>$ npm install -g mocha
</code></pre>

<p>Then invoke this command within the Medic Injector folder:</p>

<pre><code>$ npm test
</code></pre>

<h2>
<a name="license" class="anchor" href="#license"><span class="mini-icon mini-icon-link"></span></a>License</h2>

<p>(The MIT License)</p>

<p>Copyright (c) 2012 Olivier Philippon <a href="https://github.com/DrBenton">https://github.com/DrBenton</a></p>

<p>Contains snippets of code from <a href="https://github.com/kriskowal/q">Q</a> and <a href="https://github.com/sstephenson/prototype">Prototype</a> libraries. See their specific licenses for details.</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the 'Software'), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p></article>
        </div>
    </div>
  </div>
  <br style="clear:both;">


<br style="clear:both;">

<div class="frame frame-loading large-loading-area" style="display:none;" data-tree-list-url="/DrBenton/Medic-Injector-JS/tree-list/fd19248da889b6f0924b9476d3236c8cb58e17b3">
  <img alt="Octocat-spinner-128" height="64" src="https://a248.e.akamai.net/assets.github.com/images/spinners/octocat-spinner-128.gif?1347543527" width="64" />
</div>


  </div>

        </div>
      </div>
      <div class="context-overlay"></div>
    </div>

      <div id="footer-push"></div><!-- hack for sticky footer -->
    </div><!-- end of wrapper - hack for sticky footer -->

      <!-- footer -->
      <div id="footer" >
        
  <div class="upper_footer">
     <div class="container clearfix">

       <h4 id="blacktocat">GitHub Links</h4>

       <ul class="footer_nav">
         <h4>GitHub</h4>
         <li><a href="https://github.com/about">About</a></li>
         <li><a href="https://github.com/blog">Blog</a></li>
         <li><a href="https://github.com/features">Features</a></li>
         <li><a href="https://github.com/contact">Contact &amp; Support</a></li>
         <li><a href="http://training.github.com/">Training</a></li>
         <li><a href="http://enterprise.github.com/">GitHub Enterprise</a></li>
         <li><a href="http://status.github.com/">Site Status</a></li>
       </ul>

       <ul class="footer_nav">
         <h4>Clients</h4>
         <li><a href="http://mac.github.com/">GitHub for Mac</a></li>
         <li><a href="http://windows.github.com/">GitHub for Windows</a></li>
         <li><a href="http://eclipse.github.com/">GitHub for Eclipse</a></li>
         <li><a href="http://mobile.github.com/">GitHub Mobile Apps</a></li>
       </ul>

       <ul class="footer_nav">
         <h4>Tools</h4>
         <li><a href="http://get.gaug.es/">Gauges: Web analytics</a></li>
         <li><a href="http://speakerdeck.com">Speaker Deck: Presentations</a></li>
         <li><a href="https://gist.github.com">Gist: Code snippets</a></li>

         <h4 class="second">Extras</h4>
         <li><a href="http://jobs.github.com/">Job Board</a></li>
         <li><a href="http://shop.github.com/">GitHub Shop</a></li>
         <li><a href="http://octodex.github.com/">The Octodex</a></li>
       </ul>

       <ul class="footer_nav">
         <h4>Documentation</h4>
         <li><a href="http://help.github.com/">GitHub Help</a></li>
         <li><a href="http://developer.github.com/">Developer API</a></li>
         <li><a href="http://github.github.com/github-flavored-markdown/">GitHub Flavored Markdown</a></li>
         <li><a href="http://pages.github.com/">GitHub Pages</a></li>
       </ul>

     </div><!-- /.site -->
  </div><!-- /.upper_footer -->

<div class="lower_footer">
  <div class="container clearfix">
    <div id="legal">
      <ul>
          <li><a href="https://github.com/site/terms">Terms of Service</a></li>
          <li><a href="https://github.com/site/privacy">Privacy</a></li>
          <li><a href="https://github.com/security">Security</a></li>
      </ul>

      <p>&copy; 2012 <span title="0.58815s from fe18.rs.github.com">GitHub</span> Inc. All rights reserved.</p>
    </div><!-- /#legal or /#legal_ie-->

  </div><!-- /.site -->
</div><!-- /.lower_footer -->


      </div><!-- /#footer -->

    

<div id="keyboard_shortcuts_pane" class="instapaper_ignore readability-extra" style="display:none">
  <h2>Keyboard Shortcuts <small><a href="#" class="js-see-all-keyboard-shortcuts">(see all)</a></small></h2>

  <div class="columns threecols">
    <div class="column first">
      <h3>Site wide shortcuts</h3>
      <dl class="keyboard-mappings">
        <dt>s</dt>
        <dd>Focus command bar</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>?</dt>
        <dd>Bring up this help dialog</dd>
      </dl>
    </div><!-- /.column.first -->

    <div class="column middle" style='display:none'>
      <h3>Commit list</h3>
      <dl class="keyboard-mappings">
        <dt>j</dt>
        <dd>Move selection down</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>k</dt>
        <dd>Move selection up</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>c <em>or</em> o <em>or</em> enter</dt>
        <dd>Open commit</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>y</dt>
        <dd>Expand URL to its canonical form</dd>
      </dl>
    </div><!-- /.column.first -->

    <div class="column last js-hidden-pane" style='display:none'>
      <h3>Pull request list</h3>
      <dl class="keyboard-mappings">
        <dt>j</dt>
        <dd>Move selection down</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>k</dt>
        <dd>Move selection up</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>o <em>or</em> enter</dt>
        <dd>Open issue</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt><span class="platform-mac">?</span><span class="platform-other">ctrl</span> <em>+</em> enter</dt>
        <dd>Submit comment</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt><span class="platform-mac">?</span><span class="platform-other">ctrl</span> <em>+</em> shift p</dt>
        <dd>Preview comment</dd>
      </dl>
    </div><!-- /.columns.last -->

  </div><!-- /.columns.equacols -->

  <div class="js-hidden-pane" style='display:none'>
    <div class="rule"></div>

    <h3>Issues</h3>

    <div class="columns threecols">
      <div class="column first">
        <dl class="keyboard-mappings">
          <dt>j</dt>
          <dd>Move selection down</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>k</dt>
          <dd>Move selection up</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>x</dt>
          <dd>Toggle selection</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>o <em>or</em> enter</dt>
          <dd>Open issue</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt><span class="platform-mac">?</span><span class="platform-other">ctrl</span> <em>+</em> enter</dt>
          <dd>Submit comment</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt><span class="platform-mac">?</span><span class="platform-other">ctrl</span> <em>+</em> shift p</dt>
          <dd>Preview comment</dd>
        </dl>
      </div><!-- /.column.first -->
      <div class="column last">
        <dl class="keyboard-mappings">
          <dt>c</dt>
          <dd>Create issue</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>l</dt>
          <dd>Create label</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>i</dt>
          <dd>Back to inbox</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>u</dt>
          <dd>Back to issues</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>/</dt>
          <dd>Focus issues search</dd>
        </dl>
      </div>
    </div>
  </div>

  <div class="js-hidden-pane" style='display:none'>
    <div class="rule"></div>

    <h3>Issues Dashboard</h3>

    <div class="columns threecols">
      <div class="column first">
        <dl class="keyboard-mappings">
          <dt>j</dt>
          <dd>Move selection down</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>k</dt>
          <dd>Move selection up</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>o <em>or</em> enter</dt>
          <dd>Open issue</dd>
        </dl>
      </div><!-- /.column.first -->
    </div>
  </div>

  <div class="js-hidden-pane" style='display:none'>
    <div class="rule"></div>

    <h3>Network Graph</h3>
    <div class="columns equacols">
      <div class="column first">
        <dl class="keyboard-mappings">
          <dt><span class="badmono">?</span> <em>or</em> h</dt>
          <dd>Scroll left</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt><span class="badmono">?</span> <em>or</em> l</dt>
          <dd>Scroll right</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt><span class="badmono">?</span> <em>or</em> k</dt>
          <dd>Scroll up</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt><span class="badmono">?</span> <em>or</em> j</dt>
          <dd>Scroll down</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>t</dt>
          <dd>Toggle visibility of head labels</dd>
        </dl>
      </div><!-- /.column.first -->
      <div class="column last">
        <dl class="keyboard-mappings">
          <dt>shift <span class="badmono">?</span> <em>or</em> shift h</dt>
          <dd>Scroll all the way left</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>shift <span class="badmono">?</span> <em>or</em> shift l</dt>
          <dd>Scroll all the way right</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>shift <span class="badmono">?</span> <em>or</em> shift k</dt>
          <dd>Scroll all the way up</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>shift <span class="badmono">?</span> <em>or</em> shift j</dt>
          <dd>Scroll all the way down</dd>
        </dl>
      </div><!-- /.column.last -->
    </div>
  </div>

  <div class="js-hidden-pane" >
    <div class="rule"></div>
    <div class="columns threecols">
      <div class="column first js-hidden-pane" >
        <h3>Source Code Browsing</h3>
        <dl class="keyboard-mappings">
          <dt>t</dt>
          <dd>Activates the file finder</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>l</dt>
          <dd>Jump to line</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>w</dt>
          <dd>Switch branch/tag</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>y</dt>
          <dd>Expand URL to its canonical form</dd>
        </dl>
      </div>
    </div>
  </div>

  <div class="js-hidden-pane" style='display:none'>
    <div class="rule"></div>
    <div class="columns threecols">
      <div class="column first">
        <h3>Browsing Commits</h3>
        <dl class="keyboard-mappings">
          <dt><span class="platform-mac">?</span><span class="platform-other">ctrl</span> <em>+</em> enter</dt>
          <dd>Submit comment</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>escape</dt>
          <dd>Close form</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>p</dt>
          <dd>Parent commit</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>o</dt>
          <dd>Other parent commit</dd>
        </dl>
      </div>
    </div>
  </div>

  <div class="js-hidden-pane" style='display:none'>
    <div class="rule"></div>
    <h3>Notifications</h3>

    <div class="columns threecols">
      <div class="column first">
        <dl class="keyboard-mappings">
          <dt>j</dt>
          <dd>Move selection down</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>k</dt>
          <dd>Move selection up</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>o <em>or</em> enter</dt>
          <dd>Open notification</dd>
        </dl>
      </div><!-- /.column.first -->

      <div class="column second">
        <dl class="keyboard-mappings">
          <dt>e <em>or</em> shift i <em>or</em> y</dt>
          <dd>Mark as read</dd>
        </dl>
        <dl class="keyboard-mappings">
          <dt>shift m</dt>
          <dd>Mute thread</dd>
        </dl>
      </div><!-- /.column.first -->
    </div>
  </div>

</div>

    <div id="markdown-help" class="instapaper_ignore readability-extra">
  <h2>Markdown Cheat Sheet</h2>

  <div class="cheatsheet-content">

  <div class="mod">
    <div class="col">
      <h3>Format Text</h3>
      <p>Headers</p>
      <pre>
# This is an &lt;h1&gt; tag
## This is an &lt;h2&gt; tag
###### This is an &lt;h6&gt; tag</pre>
     <p>Text styles</p>
     <pre>
*This text will be italic*
_This will also be italic_
**This text will be bold**
__This will also be bold__

*You **can** combine them*
</pre>
    </div>
    <div class="col">
      <h3>Lists</h3>
      <p>Unordered</p>
      <pre>
* Item 1
* Item 2
  * Item 2a
  * Item 2b</pre>
     <p>Ordered</p>
     <pre>
1. Item 1
2. Item 2
3. Item 3
   * Item 3a
   * Item 3b</pre>
    </div>
    <div class="col">
      <h3>Miscellaneous</h3>
      <p>Images</p>
      <pre>
![GitHub Logo](/images/logo.png)
Format: ![Alt Text](url)
</pre>
     <p>Links</p>
     <pre>
http://github.com - automatic!
[GitHub](http://github.com)</pre>
<p>Blockquotes</p>
     <pre>
As Kanye West said:

> We're living the future so
> the present is our past.
</pre>
    </div>
  </div>
  <div class="rule"></div>

  <h3>Code Examples in Markdown</h3>
  <div class="col">
      <p>Syntax highlighting with <a href="http://github.github.com/github-flavored-markdown/" title="GitHub Flavored Markdown" target="_blank">GFM</a></p>
      <pre>
```javascript
function fancyAlert(arg) {
  if(arg) {
    $.facebox({div:'#foo'})
  }
}
```</pre>
    </div>
    <div class="col">
      <p>Or, indent your code 4 spaces</p>
      <pre>
Here is a Python code example
without syntax highlighting:

    def foo:
      if not bar:
        return true</pre>
    </div>
    <div class="col">
      <p>Inline code for comments</p>
      <pre>
I think you should use an
`&lt;addr&gt;` element here instead.</pre>
    </div>
  </div>

  </div>
</div>


    <div id="ajax-error-message" class="flash flash-error">
      <span class="mini-icon mini-icon-exclamation"></span>
      Something went wrong with that request. Please try again.
      <a href="#" class="mini-icon mini-icon-remove-close ajax-error-dismiss"></a>
    </div>

    <div id="logo-popup">
      <h2>Looking for the GitHub logo?</h2>
      <ul>
        <li>
          <h4>GitHub Logo</h4>
          <a href="http://github-media-downloads.s3.amazonaws.com/GitHub_Logos.zip"><img alt="Github_logo" src="https://a248.e.akamai.net/assets.github.com/images/modules/about_page/github_logo.png?1340659560" /></a>
          <a href="http://github-media-downloads.s3.amazonaws.com/GitHub_Logos.zip" class="minibutton download">Download</a>
        </li>
        <li>
          <h4>The Octocat</h4>
          <a href="http://github-media-downloads.s3.amazonaws.com/Octocats.zip"><img alt="Octocat" src="https://a248.e.akamai.net/assets.github.com/images/modules/about_page/octocat.png?1340659560" /></a>
          <a href="http://github-media-downloads.s3.amazonaws.com/Octocats.zip" class="minibutton download">Download</a>
        </li>
      </ul>
    </div>

    
    
    <span id='server_response_time' data-time='0.58966' data-host='fe18'></span>
    
  </body>
</html>

